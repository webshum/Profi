import{S as d}from"../assets/splide.esm-688b6f4b.js";function q(){document.querySelectorAll(".ajax_add_to_cart").forEach(function(t){t.addEventListener("click",function(){setTimeout(()=>{const o=new XMLHttpRequest;o.open("GET",wc_add_to_cart_params.ajax_url+"?action=get_cart_count",!0),o.onreadystatechange=function(){this.readyState==4&&this.status==200&&(document.querySelector(".head-cart span").textContent=this.responseText)},o.send()},500)})})}function S(){document.querySelectorAll('[data-popup="cart"]').forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=new XMLHttpRequest;o.open("POST",wc_add_to_cart_params.ajax_url,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.send("action=get_cart"),o.onload=()=>{o.status>=200&&o.status<300?(document.querySelector(".popup-cart .inner").innerHTML=o.responseText,l(),u(),setTimeout(()=>{document.querySelectorAll(".popup-close").forEach(r=>{r.addEventListener("click",n=>{r.closest(".popup").classList.remove("active"),document.querySelector(".popup-overlay").classList.remove("active")})})},500)):console.log("Error!")}})})}function l(){document.querySelectorAll(".qty").length&&document.querySelectorAll(".qty").forEach(e=>{if(e.closest(".product-quantity")!=null){const t=e.closest(".product-quantity").querySelector(".minus"),o=e.closest(".product-quantity").querySelector(".plus");e.addEventListener("input",r=>{if(r.target.value>0){const n=e.closest(".product-quantity").dataset.item_key,c=e.closest(".product-quantity").dataset.product_id,a=r.target.value;s(n,a,e,c)}}),t.addEventListener("click",r=>{if(e.value>0){const n=e.closest(".product-quantity").dataset.item_key,c=e.closest(".product-quantity").dataset.product_id,a=e.value;s(n,a,e,c)}}),o.addEventListener("click",r=>{if(e.value>0){const n=e.closest(".product-quantity").dataset.item_key,c=e.closest(".product-quantity").dataset.product_id,a=e.value;s(n,a,e,c)}})}}),document.querySelectorAll(".product-remove a").length&&document.querySelectorAll(".product-remove a").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=t.target.closest(".product-remove").dataset.item_key;p(o,t.target)})}),document.querySelector(".coupon .button")!=null&&document.querySelector(".coupon .button").addEventListener("click",e=>{const t=document.querySelector(".coupon .input-text").value;i(t)}),document.querySelector(".woocommerce-remove-coupon")!=null&&document.querySelector(".woocommerce-remove-coupon").addEventListener("click",e=>{e.preventDefault();const t=e.target.dataset.coupon;m(t)})}function s(e,t,o,r){const n=new XMLHttpRequest;n.open("POST",wc_add_to_cart_params.ajax_url,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send("action=update_cart_qty&item_key="+e+"&quantity="+t+"&product_id="+r),n.onload=()=>{if(n.status>=200&&n.status<300){const c=JSON.parse(n.responseText),a=o.closest(".cart_item");a.querySelector(".product-subtotal .wrap").innerHTML=c.product_subtotal,document.querySelector(".order-total strong").innerHTML=c.cart_total}else console.log("Error!")}}function p(e,t){const o=new XMLHttpRequest;o.open("POST",wc_add_to_cart_params.ajax_url,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.send("action=remove_cart_item&item_key="+e),o.onload=()=>{if(o.status>=200&&o.status<300){const r=JSON.parse(o.responseText);document.querySelector(".order-total strong").innerHTML=r.cart_total,t.closest(".cart_item").remove(),u(),_(),r.cart_count==0&&y()}else console.log("Error!")}}function i(e){const t=new XMLHttpRequest;t.open("POST",wc_add_to_cart_params.ajax_url,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.send("action=apply_coupon&coupon_code="+e),t.onload=()=>{if(t.status>=200&&t.status<300){const o=JSON.parse(t.responseText),r=document.createElement("span");r.className="message-coupon",o.error_message!=null?r.innerHTML=o.error_message:r.innerHTML=o.coupon_message,document.querySelector(".message-coupon")!=null&&document.querySelector(".message-coupon").remove(),document.querySelector(".coupon").append(r)}else console.log("Error!")}}function m(e){const t=new XMLHttpRequest;t.open("POST",wc_add_to_cart_params.ajax_url,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.send("action=remove_coupon&coupon_code="+e),t.onload=()=>{if(t.status>=200&&t.status<300){const o=JSON.parse(t.responseText);o.success?document.querySelector(".cart-discount").remove():console.log("Error!: "+o)}else console.log("Error!")}}function _(){const e=new XMLHttpRequest;e.open("GET",wc_add_to_cart_params.ajax_url+"?action=get_cart_count",!0),e.onreadystatechange=function(){this.readyState==4&&this.status==200&&(document.querySelector(".head-cart span").textContent=this.responseText)},e.send()}function y(){const e=new XMLHttpRequest;e.open("POST",wc_add_to_cart_params.ajax_url,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send("action=get_cart"),e.onload=()=>{e.status>=200&&e.status<300?(document.querySelector(".popup-cart .inner").innerHTML=e.responseText,setTimeout(()=>{document.querySelectorAll(".popup-close").forEach(t=>{t.addEventListener("click",o=>{t.closest(".popup").classList.remove("active"),document.querySelector(".popup-overlay").classList.remove("active")})})},500)):console.log("Error!")}}function u(){document.querySelector(".woocommerce-cart-form .splide")!=null&&new d(".woocommerce-cart-form .splide",{type:"loop",perPage:1,arrows:!0,mediaQuery:"min",breakpoints:{700:{destroy:!0}}}).mount()}export{q as a,S as g,l as u};
